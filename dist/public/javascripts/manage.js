define("public",[],function(require,exports,module){var t={init:function(){t.bind(),t.selectDiv()},selectDiv:function(){$("body").on("click",".select span",function(t){var i=$(this).parents(".select"),e=$(i).children("ul");$(i).css({"border-color":"#b4dbed","box-shadow":"0px 0px 3px #c4e6f5"}),$(e).is(":hidden")?$(e).show():$(e).hide(),t.stopPropagation()}),$("body").on("click",".select ul li",function(t){var i=$(this).parents(".select"),e=$(this).text(),n=$(this).attr("t-type"),o=$(this).attr("t-id");$(i).children("span").html(e+"<i></i>").attr("t-type",n).attr("t-id",o),$(i).children("ul").hide(),t.stopPropagation()}),$("body").on("click",function(t){$(".select").length>0&&($(".select ul").hide(),$(".select").css({"border-color":"#d7d7d7","box-shadow":"inset 0px 1px 1px rgba(0, 0, 0, 0.06)"})),t.stopPropagation()})},bind:function(){$(".exit").on("click",function(){location.href="/login"})}};module.exports=t});
define("manage",["public","pagination"],function(require,exports,module){var t=require("public"),e=(require("pagination"),{init:function(){e.bind(),e.nav(),t.init(),e.getMachine(),e.getTool(),e.batch()},bind:function(){$("body").on("click",".machine-box .delete",e.deleteMachine),$("body").on("click",".machine-box .add-machine",e.addMachine),$("body").on("click",".machine-box .edit",e.modifyMachine),$("body").on("click",".tool-box .delete",e.deleteTool),$("body").on("click",".tool-box .add-tool",e.addTool),$("body").on("click",".tool-box .edit",e.modifyTool),$("body").on("click",".delete-all-machine",e.allDeleteMachine)},nav:function(){$(".container-nav-btn li").on("click",function(){var t=$(this).index();$(".container-nav-btn li").removeClass("active"),$(this).addClass("active"),$(".container").hide(),$(".container").eq(t).show()})},batch:function(){var t=$(".all").parents("table").find("tbody").children('input[type="checkbox"]');$(".all").on("click",function(){$(this).is(":checked")?$(t).prop("checked",!0):$(t).prop("checked",!1)})},allDeleteMachine:function(){var t=$(this).attr("type");if("m-all"==t)var a=$("#all");else var a=$("#all2");var o=$(a).parents("table").find("tbody").children('input[type="checkbox"]'),n=$(a).parents("table").find("tbody").children('input[type="checkbox"]:checked');if("off"==$(this).attr("is"))$(this).html("批量删除 &times;").attr("is","on"),$(a).parents("td").fadeIn(),$(o).parents(".ft").fadeIn();else if(0==n.length)swal("警告!","请选择需要删除的数据! ","warning");else{var l=[];if($(n).each(function(t,e){l.push($(e).parents("td").prev("td").text())}),"m-all"==t)var i="/api/machine/delete";else var i="/api/tool/delete";$.ajax({type:"post",url:i,async:!0,data:{IdList:l.toString()},success:function(t){t.status?swal("失败!","删除失败！ ","error"):(swal("成功!","删除成功！","success"),e.getMachine())},error:function(t){swal("失败!","删除失败！错误信息："+t.status,"error")}})}},deleteMachine:function(){var t=this;swal({title:"操作提醒",text:"是否确认删除该条数据？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认删除",closeOnConfirm:!1,cancelButtonText:"取消"},function(){var a=[];a.push($(t).parents("tr").children("td").eq(0).text()),$.ajax({type:"post",url:"/api/machine/delete",async:!0,data:{IdList:a.toString()},success:function(t){t.status?swal("失败!","删除失败！ ","error"):(swal("成功!","该机床已删除！","success"),e.getMachine())},error:function(t){swal("失败!","删除失败！错误信息："+t.status,"error")}})})},deleteTool:function(){var t=this;swal({title:"操作提醒",text:"是否确认删除该条数据？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认删除",closeOnConfirm:!1,cancelButtonText:"取消"},function(){var a=[];a.push($(t).parents("tr").children("td").eq(0).text()),$.ajax({type:"post",url:"/api/tool/delete",async:!0,data:{IdList:a.toString()},success:function(t){t.status?swal("失败!","删除失败！","error"):(swal("成功!","该刀具已删除！","success"),e.getTool())},error:function(t){swal("失败!","删除失败！错误信息："+t.status,"error")}})})},addMachine:function(){swal({title:"添加机床",text:'<div class="add-machine-body"><input type="text" placeholder="名称" class="add-name" style="display: block" /><div class="select"><span class="add-type">车床<i></i></span><ul><li>车床</li><li>磨床</li><li>锐床</li></ul></div><input type="text" placeholder="负责人" class="add-charger" style="display: block" /><p class="error-msg"></p></div>',html:!0,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"添加",closeOnConfirm:!1,cancelButtonText:"取消"},function(){var t=$(".add-machine-body .add-name").val(),a=$(".add-machine-body .add-charger").val(),o=$(".add-machine-body .add-type").text();return t?a?o?void $.ajax({type:"post",url:"/api/machine/add",async:!0,data:{MachineName:t,MachineCharger:a,MachineType:o},success:function(t){t.status?swal("失败!","机床添加失败！","error"):(swal("成功!","机床添加成功！","success"),e.getMachine())},error:function(t){swal("失败!","机床添加失败！错误信息："+t.status,"error")}}):void $(".error-msg").text("请选择机床类型！").fadeIn():void $(".error-msg").text("请填写机床负责人！").fadeIn():void $(".error-msg").text("请填写机床名称！").fadeIn()})},addTool:function(){swal({title:"添加刀具",text:'<div class="add-tool-body"><input type="text" placeholder="名称" class="add-name" style="display: block" /><input type="text" placeholder="类型" class="add-type" style="display: block" /><input type="text" placeholder="数量" class="add-num" style="display: block" /><p class="error-msg"></p></div>',html:!0,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"添加",closeOnConfirm:!1,cancelButtonText:"取消"},function(){var t=$(".add-tool-body .add-name").val(),a=$(".add-tool-body .add-num").val(),o=$(".add-tool-body .add-type").val();return t?o?a?void $.ajax({type:"post",url:"/api/tool/add",async:!0,data:{ToolName:t,ToolNum:a,ToolType:o},success:function(t){t.status?swal("失败!","刀具添加失败！","error"):(swal("成功!","刀具添加成功！","success"),e.getTool())},error:function(t){swal("失败!","刀具添加失败！错误信息："+t.status,"error")}}):void $(".error-msg").text("请填写刀具数量！").fadeIn():void $(".error-msg").text("请填写刀具类型！").fadeIn():void $(".error-msg").text("请填写刀具名称！").fadeIn()})},modifyMachine:function(){var t=$(this).parents("tr").find("td"),a=t.eq(1).text(),o=t.eq(2).text(),n=t.eq(3).text(),l=t.eq(0).text(),i='<div class="modify-machine-body"><input type="text" placeholder="名称" class="modify-name" style="display: block" value="'+a+'" /><div class="select"><span class="modify-type" style="color:#76838f">'+o+'<i></i></span><ul><li>车床</li><li>磨床</li><li>锐床</li></ul></div><input type="text" placeholder="负责人" class="modify-charger" style="display: block" value="'+n+'" /><p class="error-msg"></p></div>';swal({title:"修改机床",text:i,html:!0,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",closeOnConfirm:!1,cancelButtonText:"取消"},function(){var t=$(".modify-machine-body .modify-name").val(),a=$(".modify-machine-body .modify-charger").val(),o=$(".modify-machine-body .modify-type").text();return t?o?a?void $.ajax({type:"post",url:"/api/machine/update",async:!0,data:{Id:l,MachineName:t,MachineCharger:a,MachineType:o},success:function(t){t.status?swal("失败!","机床修改失败！","error"):(swal("成功!","机床修改成功！","success"),e.getMachine())},error:function(t){swal("失败!","机床修改失败！错误信息："+t.status,"error")}}):void $(".error-msg").text("请填写机床负责人！").fadeIn():void $(".error-msg").text("请选择机床类型！").fadeIn():void $(".error-msg").text("请填写机床名称！").fadeIn()})},modifyTool:function(){var t=$(this).parents("tr").find("td"),a=t.eq(1).text(),o=t.eq(2).text(),n=t.eq(3).text(),l=t.eq(0).text(),i='<div class="add-tool-body"><input type="text" placeholder="名称" class="add-name" style="display: block" value="'+a+'" /><input type="text" placeholder="类型" class="add-type" style="display: block" value="'+o+'" /><input type="text" placeholder="数量" class="add-num" style="display: block" value="'+n+'" /><p class="error-msg"></p></div>';swal({title:"修改刀具",text:i,html:!0,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",closeOnConfirm:!1,cancelButtonText:"取消"},function(){var t=$(".add-tool-body .add-name").val(),a=$(".add-tool-body .add-num").val(),o=$(".add-tool-body .add-type").val();return t?o?a?void $.ajax({type:"post",url:"/api/tool/update",async:!0,data:{Id:l,ToolName:t,ToolNum:a,ToolType:o},success:function(t){t.status?swal("失败!","刀具修改失败！","error"):(swal("成功!","刀具修改成功！","success"),e.getTool())},error:function(t){swal("失败!","刀具修改失败！错误信息："+t.status,"error")}}):void $(".error-msg").text("请填写刀具数量！").fadeIn():void $(".error-msg").text("请填写刀具类型！").fadeIn():void $(".error-msg").text("请填写刀具名称！").fadeIn()})},getMachine:function(){var t=$(".machine-box table tbody");$(".page").pagination({ajax:{on:!0,type:"post",url:"/api/machine/get",dataType:"json",param:{PageIndex:1,PageSize:10},ajaxStart:function(){$(".machine-box .manage-loading").show()},callback:function(e){$(".machine-box .manage-loading").hide();var a=[];if(e.status){var o=e.message?e.message:"获取机床列表失败";a.push('<tr><td align="center">'+o+"</td></tr>")}else e.data.length>0?$(e.data).each(function(t,e){var o='<tr><td class="ft"><label for="m-'+e.Id+'"><input id="m-'+e.Id+'" type="checkbox" /></label></td><td>'+e.Id+"</td><td>"+e.MachineName+"</td><td>"+e.MachineType+"</td><td>"+e.MachineCharger+'</td><td align="center"><button class="edit">修改</button><button class="delete">删除</button></td></tr>';a.push(o)}):a.push('<tr><td colspan="6" align="center">没有数据</td></tr>');$(t).html(a.join(""))}}})},getTool:function(){var t=$(".tool-box table tbody");$(".page").pagination({ajax:{on:!0,type:"post",url:"/api/tool/get",dataType:"json",param:{PageIndex:1,PageSize:10},ajaxStart:function(){$(".tool-box .manage-loading").show()},callback:function(e){$(".tool-box .manage-loading").hide();var a=[];if(e.status){var o=e.message?e.message:"获取刀具列表失败";a.push('<tr><td align="center">'+o+"</td></tr>")}else e.data.length>0?$(e.data).each(function(t,e){var o='<tr><td class="ft"><label for="m-'+e.Id+'"><input id="m-'+e.Id+'" type="checkbox" /></label></td><td>'+e.Id+"</td><td>"+e.ToolName+"</td><td>"+e.ToolType+"</td><td>"+e.ToolNum+'</td><td align="center"><button class="edit">修改</button><button class="delete">删除</button></td></tr>';a.push(o)}):a.push('<tr><td align="center" colspan="5">没有数据</td></tr>');$(t).html(a.join(""))}}})}});module.exports=e.init()});